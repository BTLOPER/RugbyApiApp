<UserControl x:Class="RugbyApiApp.MAUI.Views.DataTabView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
			 xmlns:iconPacks="clr-namespace:MahApps.Metro.IconPacks;assembly=MahApps.Metro.IconPacks.Material">
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="../Resources/SharedResources.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </UserControl.Resources>
    <Grid Margin="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Border Grid.Row="0" Background="{StaticResource SurfaceBrush}" BorderBrush="{StaticResource BorderBrush}" BorderThickness="1" CornerRadius="8" Padding="16" Margin="0,0,0,16">
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                <TextBlock Text="Data Type:" Style="{StaticResource TitleStyle}" VerticalAlignment="Center" Margin="0,0,12,0"/>
                <ComboBox x:Name="DataTypeCombo" Width="200" ItemsSource="{Binding DataTypes}" SelectedItem="{Binding SelectedDataType}" Style="{StaticResource ModernComboBox}"/>
                <Button Style="{StaticResource SecondaryButtonStyle}" Command="{Binding RefreshCommand}" Margin="12,0,0,0" Padding="12,8">
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <TextBlock Text="Refresh" VerticalAlignment="Center"/>
                    </StackPanel>
                </Button>

                <!-- Search and Filter Section -->
                <Separator Width="1" Background="{StaticResource BorderBrush}" Margin="16,0"/>

                <TextBlock Text="Search:" Style="{StaticResource TitleStyle}" VerticalAlignment="Center" Margin="12,0,8,0"/>
                <TextBox x:Name="SearchBox" Width="200" Height="36" Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}" Background="{StaticResource SurfaceBrush}" BorderBrush="{StaticResource BorderBrush}" BorderThickness="1" Padding="12,8" Foreground="{StaticResource TextBrush}"/>

                <CheckBox x:Name="FavoritesCheckBox" VerticalAlignment="Center" Margin="16,0,0,0" IsChecked="{Binding ShowFavoritesOnly}" Foreground="{StaticResource TextBrush}">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Favorites Only" VerticalAlignment="Center"/>
                    </StackPanel>
                </CheckBox>
            </StackPanel>
        </Border>

        <Grid Grid.Row="1">
            <Grid x:Name="DataGridContainer">
                <!-- Countries DataGrid -->
                <DataGrid x:Name="CountriesDataGrid" ItemsSource="{Binding CountriesData}" AutoGenerateColumns="False" Style="{StaticResource ModernDataGrid}" Visibility="{Binding IsCountriesVisible, Converter={StaticResource BoolToVisibilityConverter}}" VerticalScrollBarVisibility="Auto">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Name" Binding="{Binding Name}" IsReadOnly="True" Width="400"/>
                        <DataGridTextColumn Header="Code" Binding="{Binding Code}" IsReadOnly="True" Width="100"/>
                        <DataGridTextColumn Header="Status" Binding="{Binding Status}" IsReadOnly="True" Width="150"/>
                    </DataGrid.Columns>
                </DataGrid>

                <!-- Seasons DataGrid -->
                <DataGrid x:Name="SeasonsDataGrid" ItemsSource="{Binding SeasonsData}" AutoGenerateColumns="False" Style="{StaticResource ModernDataGrid}" Visibility="{Binding IsSeasonsVisible, Converter={StaticResource BoolToVisibilityConverter}}" VerticalScrollBarVisibility="Auto">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Year" Binding="{Binding Year}" IsReadOnly="True" Width="120"/>
                        <DataGridTextColumn Header="Current" Binding="{Binding Current}" IsReadOnly="True" Width="120"/>
                        <DataGridTextColumn Header="Status" Binding="{Binding Status}" IsReadOnly="True" Width="150"/>
                    </DataGrid.Columns>
                </DataGrid>

                <!-- Leagues DataGrid -->
                <DataGrid x:Name="LeaguesDataGrid" ItemsSource="{Binding LeaguesData}" AutoGenerateColumns="False" Style="{StaticResource ModernDataGrid}" Visibility="{Binding IsLeaguesVisible, Converter={StaticResource BoolToVisibilityConverter}}" VerticalScrollBarVisibility="Auto">
                    <DataGrid.Columns>
                        <DataGridTemplateColumn  Width="50">
							<DataGridTemplateColumn.Header >
								<iconPacks:PackIconMaterial  Kind="Star" Width="14" Height="14" Foreground="DarkGray" Margin="10,0,4,0" HorizontalAlignment="Center"/>
							</DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
									<Grid>
										
										<Button Margin="5" BorderBrush="Transparent" Background="Transparent" ToolTip="Unfavorite"
																						Command="{Binding DataContext.ToggleFavoriteCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}" CommandParameter="{Binding Id}"
																						Visibility="{Binding Favorite, Converter={StaticResource BoolToVisibilityConverter}}">
											<iconPacks:PackIconMaterial  Kind="Star" Width="14" Height="14" Foreground="{StaticResource GoldStarBrush}" Margin="0,0,4,0"/>
										</Button>
										
									    <Button Margin="5" BorderBrush="Transparent" Background="Transparent" ToolTip="Favorite"
											    Command="{Binding DataContext.ToggleFavoriteCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}" CommandParameter="{Binding Id}"
											    Visibility="{Binding Favorite, Converter={StaticResource InvertedBoolToVisibilityConverter}}">
										    <iconPacks:PackIconMaterial  Kind="StarOutline" Width="14" Height="14" Foreground="{StaticResource DeadStarBrush}" Margin="0,0,4,0"/>
									    </Button>									
									</Grid>
                                    
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        <DataGridTextColumn Header="ID" Binding="{Binding Id}" IsReadOnly="True" Width="60"/>
                        <DataGridTextColumn Header="Name" Binding="{Binding Name}" IsReadOnly="True" Width="300"/>
                        <DataGridTextColumn Header="Country" Binding="{Binding Country}" IsReadOnly="True" Width="120"/>
                        <DataGridTextColumn Header="Type" Binding="{Binding Type}" IsReadOnly="True" Width="150"/>
                    </DataGrid.Columns>
                </DataGrid>

                <!-- Teams DataGrid -->
                <DataGrid x:Name="TeamsDataGrid" ItemsSource="{Binding TeamsData}" AutoGenerateColumns="False" Style="{StaticResource ModernDataGrid}" Visibility="{Binding IsTeamsVisible, Converter={StaticResource BoolToVisibilityConverter}}" VerticalScrollBarVisibility="Auto">
                    <DataGrid.Columns>
                        <DataGridTemplateColumn Width="50">
							<DataGridTemplateColumn.Header >
								<iconPacks:PackIconMaterial  Kind="Star" Width="14" Height="14" Foreground="DarkGray" Margin="10,0,4,0" HorizontalAlignment="Center"/>
							</DataGridTemplateColumn.Header>
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
									<Grid>

										<Button Margin="5" BorderBrush="Transparent" Background="Transparent" ToolTip="Unfavorite"
																						Command="{Binding DataContext.ToggleFavoriteCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}" CommandParameter="{Binding Id}"
																						Visibility="{Binding Favorite, Converter={StaticResource BoolToVisibilityConverter}}">
											<iconPacks:PackIconMaterial  Kind="Star" Width="14" Height="14" Foreground="{StaticResource GoldStarBrush}" Margin="0,0,4,0"/>
										</Button>

										<Button Margin="5" BorderBrush="Transparent" Background="Transparent" ToolTip="Favorite"
											    Command="{Binding DataContext.ToggleFavoriteCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}" CommandParameter="{Binding Id}"
											    Visibility="{Binding Favorite, Converter={StaticResource InvertedBoolToVisibilityConverter}}">
											<iconPacks:PackIconMaterial  Kind="StarOutline" Width="14" Height="14" Foreground="{StaticResource DeadStarBrush}" Margin="0,0,4,0"/>
										</Button>
									</Grid>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        <DataGridTextColumn Header="ID" Binding="{Binding Id}" IsReadOnly="True" Width="60"/>
                        <DataGridTextColumn Header="Name" Binding="{Binding Name}" IsReadOnly="True" Width="350"/>
                        <DataGridTextColumn Header="Code" Binding="{Binding Code}" IsReadOnly="True" Width="100"/>
                        <DataGridTextColumn Header="Status" Binding="{Binding Status}" IsReadOnly="True" Width="150"/>
                    </DataGrid.Columns>
                </DataGrid>

                <!-- Games DataGrid -->
                <DataGrid x:Name="GamesDataGrid" ItemsSource="{Binding GamesData}" AutoGenerateColumns="False" Style="{StaticResource ModernDataGrid}" Visibility="{Binding IsGamesVisible, Converter={StaticResource BoolToVisibilityConverter}}" VerticalScrollBarVisibility="Auto">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Home Team" Binding="{Binding Home}" IsReadOnly="True" Width="250"/>
                        <DataGridTextColumn Header="Away Team" Binding="{Binding Away}" IsReadOnly="True" Width="250"/>
                        <DataGridTextColumn Header="Date" Binding="{Binding Date}" IsReadOnly="True" Width="120"/>
                        <DataGridTextColumn Header="Venue" Binding="{Binding Venue}" IsReadOnly="True" Width="300"/>
                    </DataGrid.Columns>
                </DataGrid>
            </Grid>
        </Grid>
    </Grid>
</UserControl>
